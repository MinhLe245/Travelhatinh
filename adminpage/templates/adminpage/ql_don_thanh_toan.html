{% extends "adminpage/base.html" %}
{% load humanize %}

{% block test_sontent %}
<div class="container mt-4">
  <div class="mb-3 text-start">
    <a href="{% url 'hometour' %}" class="btn btn-outline-secondary">
      <i class="fas fa-arrow-left"></i> Quay láº¡i
    </a>
  </div>

  <h2 class="mb-4 text-primary"><i class="fas fa-receipt"></i> Danh sÃ¡ch Ä‘Æ¡n thanh toÃ¡n</h2>
  <p><strong>Tá»•ng sá»‘ Ä‘Æ¡n:</strong> <span class="text-primary fw-bold">{{ total_orders }}</span></p>

  <div class="table-responsive shadow-sm rounded">
    <table class="table table-bordered table-hover align-middle">
      <thead class="table-dark text-center">
        <tr>
          <th>#</th>
          <th>ğŸ‘¤ KhÃ¡ch hÃ ng</th>
          <th>ğŸ§³ Tour Ä‘Ã£ Ä‘áº·t</th>
          <th>ğŸ“… NgÃ y Ä‘áº·t</th>
          <th>ğŸ’¸ Tá»· lá»‡ thanh toÃ¡n</th>
          <th class="text-success">âœ… ÄÃ£ tráº£</th>
          <th class="text-danger">â— CÃ²n láº¡i</th>
          <th>ğŸ“¦ PhÆ°Æ¡ng thá»©c</th>
        </tr>
      </thead>
      <tbody>
        {% for order in orders %}
        <tr class="text-center">
          <td class="fw-bold">#{{ order.id }}</td>
          <td>{{ order.username }}</td>
          <td class="text-start">
            <ul class="list-unstyled mb-0">
              {% for item in order.tour_items %}
                <li><i class="fas fa-location-dot text-success"></i> {{ item.tour_name }} <span class="badge bg-info text-dark">{{ item.quantity }} ngÆ°á»i</span></li>
              {% empty %}
                <li class="text-muted">KhÃ´ng cÃ³ tour</li>
              {% endfor %}
            </ul>
          </td>
          <td>{{ order.created_at|date:"d/m/Y H:i" }}</td>
          <td>
            {% if order.payment_percent == 20 %}
              <span class="badge bg-warning text-dark"><i class="fas fa-hourglass-half"></i> 20%</span>
            {% else %}
              <span class="badge bg-success"><i class="fas fa-check-circle"></i> 100%</span>
            {% endif %}
          </td>
          <td class="text-success fw-bold">{{ order.paid|floatformat:0|intcomma }} Ä‘</td>
          <td class="text-danger fw-bold">{{ order.remain|floatformat:0|intcomma }} Ä‘</td>
          <td>
            {% if order.payment_method == "pay_20" %}
              <span class="badge bg-warning text-dark">Tráº£ trÆ°á»›c</span>
            {% elif order.payment_method == "online" %}
              <span class="badge bg-primary">Online</span>
            {% else %}
              <span class="badge bg-secondary">Tiá»n máº·t</span>
            {% endif %}
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="8" class="text-center text-muted">KhÃ´ng cÃ³ Ä‘Æ¡n nÃ o Ä‘Æ°á»£c thanh toÃ¡n.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
